
def isTopLevelBuild = gradle.getParent() == null

if (isTopLevelBuild) {
    assert gradle.startParameter.buildCacheEnabled : "Build caching is not enabled. Please enable build caching and run this experiment again"

    settingsEvaluated { settings ->
        settings.buildCache {
            local {
                enabled = true
                push = true
                directory = "${settings.rootDir}/../build-cache"
            }
            if (remote != null) {
               remote.enabled = false
            }
        }
    }
}

